webpackJsonp([3],{"7hew":function(t,a){},ACw6:function(t,a){},ggWB:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("a3Yh"),i=e.n(s),o=e("p0Vp"),l=e("xd7I"),n=e("3cXf"),r=e.n(n),f={name:"staffForm",props:{oldStaffForm:Object,isEdit:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data:function(){return{baseUrl:"",valid:!1,staffForm:{id:"",staffNum:"",staffName:"",department:""},imageDialogVisible:!1}},watch:{oldStaffForm:function(t){this.staffForm=t}},mounted:function(){var t=this;$("#myModal").on("hidden.bs.modal",function(){t.clear()})},methods:{submit:function(){var t=this;this.isEdit?this.$http({method:"put",url:this.apiUrls.getUserIdPrefix()+this.apiUrls.updateStaff+this.staffForm.id,data:r()(this.staffForm),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(){t.$emit("reload"),$.notify({title:"操作成功",message:"数据已更新至后台",icon:"fa fa-check"},{type:"success"})}).catch(function(){$.notify({title:"数据加载失败",message:"请检查网络情况或刷新重试",icon:"fa fa-close"},{type:"danger"})}):this.$http({method:"post",url:this.apiUrls.getUserIdPrefix()+this.apiUrls.insertStaff,data:r()(this.staffForm),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(){t.$emit("reload"),$.notify({title:"操作成功",message:"数据已更新至后台",icon:"fa fa-check"},{type:"success"})}).catch(function(){$.notify({title:"数据加载失败",message:"请检查网络情况或刷新重试",icon:"fa fa-close"},{type:"danger"})})},clear:function(){this.staffForm.id="",this.staffForm.staffName="",this.staffForm.staffNum="",this.staffForm.department=""}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"modal-body"},[e("form",{ref:"staffForm",staticClass:"form-horizontal",attrs:{id:"form-data"}},[e("fieldset",[e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-xs-3 col-sm-3 col-md-3 control-label",attrs:{name:"staffNum",for:"staffNum"}},[t._v("员工编号")]),t._v(" "),e("div",{staticClass:"col-xs-6 col-sm-6 col-md-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.staffForm.staffNum,expression:"staffForm.staffNum"}],staticClass:"form-control",attrs:{type:"text",placeholder:"员工编号"},domProps:{value:t.staffForm.staffNum},on:{input:function(a){a.target.composing||t.$set(t.staffForm,"staffNum",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-xs-3 col-sm-3 col-md-3 control-label",attrs:{for:"staffName"}},[t._v("员工姓名")]),t._v(" "),e("div",{staticClass:"col-xs-6 col-sm-6 col-md-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.staffForm.staffName,expression:"staffForm.staffName"}],staticClass:"form-control",attrs:{name:"staffName",type:"text",placeholder:"员工姓名"},domProps:{value:t.staffForm.staffName},on:{input:function(a){a.target.composing||t.$set(t.staffForm,"staffName",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-xs-3 col-sm-3 col-md-3 control-label",attrs:{for:"daprtment"}},[t._v("所属部门")]),t._v(" "),e("div",{staticClass:"col-xs-6 col-sm-6 col-md-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.staffForm.department,expression:"staffForm.department"}],staticClass:"form-control",attrs:{name:"daprtment",type:"text",placeholder:"所属部门",list:"process-list"},domProps:{value:t.staffForm.department},on:{input:function(a){a.target.composing||t.$set(t.staffForm,"department",a.target.value)}}})])]),t._v(" "),t._m(0)])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-default icon-btn",attrs:{"data-dismiss":"modal"},on:{click:t.clear}},[e("i",{staticClass:"fa fa-fw fa-lg fa-times-circle"}),t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{"data-dismiss":"modal",type:"button"},on:{click:t.submit}},[e("i",{staticClass:"fa fa-fw fa-lg fa-check-circle"}),t._v("\n      "+t._s(t.isEdit?"修改":"确定")+"\n    ")])])])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("datalist",{attrs:{id:"process-list"}},[e("option",[t._v("高压")]),t._v(" "),e("option",[t._v("贴标")]),t._v(" "),e("option",[t._v("注浆")]),t._v(" "),e("option",[t._v("上釉")]),t._v(" "),e("option",[t._v("杯组")]),t._v(" "),e("option",[t._v("滚压")])])}]};var d=e("C7Lr")(f,c,!1,function(t){e("ACw6")},null,null).exports;l.a.component("item-action",o.a);var m={components:{StaffForm:d},data:function(){var t;return{show:!1,staffForm:{},isEdit:!1,formData:{staffNum:"",staffName:"",department:""},styleWidth:"",pageIndex:1,pageSize:10,total:0,sortBy:"",sortType:"",key:"",isLoading:!1,multipleSort:!1,tableConfig:{tableData:[],columns:[{field:"staffNum",title:"员工编号",titleAlign:"center",width:50,columnAlign:"center",isResize:!0},{field:"staffName",title:"员工姓名",titleAlign:"center",width:80,columnAlign:"center",isResize:!0},{field:"department",title:"部门",titleAlign:"center",width:80,columnAlign:"center",isResize:!0},(t={field:"custome-adv",title:"操作",titleAlign:"center",width:80},i()(t,"titleAlign","center"),i()(t,"columnAlign","center"),i()(t,"componentName","item-action"),i()(t,"isResize",!0),t)]}}},created:function(){this.getTableData()},mounted:function(){},watch:{key:function(t){t||this.getTableData()}},methods:{getTableData:function(){var t=this;this.isLoading=!0;var a={page:this.pageIndex,rows:this.pageSize,sortBy:this.sortBy,sortType:this.sortType,key:this.key};this.$api.staffList(a).then(function(a){t.tableConfig.tableData=a.datas,t.total=a.total,t.isLoading=!1}).catch(function(a){t.isLoading=!1})},pageChange:function(t){this.pageIndex=t,this.getTableData()},pageSizeChange:function(t){this.pageIndex=1,this.pageSize=t,this.getTableData()},customCompFunc:function(t){if("delete"===t.type)this.deleteStaff(t.id);else if("edit"===t.type){var a={id:t.rowData.id,staffNum:t.rowData.staffNum,staffName:t.rowData.staffName,department:t.rowData.department};this.isEdit=!0,this.staffForm=a,$("#myModal").modal("show")}},addStaff:function(){this.isEdit=!1},deleteStaff:function(t){var a=this;this.$api.deleteStaff(t).then(function(t){a.getTableData(),swal("删除成功!","该条记录已被永久性移除","success")})}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body",attrs:{id:"card-body"}},[e("div",{staticClass:"row"},[e("ul",{staticClass:"col-sm-6 bread-li"},[e("li",{attrs:{"data-toggle":"modal","data-target":"#myModal"},on:{click:t.addStaff}},[t._m(1)])]),t._v(" "),e("ul",{staticClass:"col-sm-6 bread-li right-bread"},[e("li",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],staticClass:"form-control",attrs:{type:"text",placeholder:"输入关键字搜索"},domProps:{value:t.key},on:{change:function(t){},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getTableData(a)},input:function(a){a.target.composing||(t.key=a.target.value)}}})]),t._v(" "),e("li",[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.getTableData}},[e("i",{staticClass:"fa fa-fw fa-lg fa-search"}),t._v(" 搜索\n                      ")])])])]),t._v(" "),e("div",{staticClass:"row"},[e("v-table",{staticClass:"table-responsive",staticStyle:{width:"100%"},attrs:{"is-loading":t.isLoading,"is-horizontal-resize":"","column-width-drag":"",columns:t.tableConfig.columns,"table-data":t.tableConfig.tableData,"paging-index":(t.pageIndex-1)*t.pageSize,"row-hover-color":"#eee","row-click-color":"#edf7ff"},on:{"on-custom-comp":t.customCompFunc}})],1),t._v(" "),e("div",{staticClass:"row v-pagin"},[e("v-pagination",{attrs:{total:t.total,"page-size":t.pageSize,layout:["total","prev","pager","next","sizer","jumper"]},on:{"page-change":t.pageChange,"page-size-change":t.pageSizeChange}})],1)])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"myModal",tabindex:"-10000",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content",staticStyle:{"padding-bottom":"0px"}},[e("div",{staticClass:"modal-header",staticStyle:{border:"none"}},[e("div",{staticClass:"modal-title",attrs:{slot:"title"},slot:"title"},[t._v("添加员工信息")])]),t._v(" "),e("staff-form",{attrs:{oldStaffForm:t.staffForm,isEdit:t.isEdit},on:{reload:t.getTableData}})],1)])])])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-title"},[e("div",[e("h1",[e("i",{staticClass:"fa fa-laptop"}),t._v("员工信息")]),t._v(" "),e("p",[t._v("录入或修改我的员工信息")])]),t._v(" "),e("div",[e("ul",{staticClass:"breadcrumb"},[e("li",[e("i",{staticClass:"fa fa-users fa-lg"})]),t._v(" "),e("li",[t._v("管理")]),t._v(" "),e("li",[e("a",{attrs:{href:"#/staffs"}},[t._v("员工信息")])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"fa fa-lg fa-plus"}),this._v("添加")])}]};var u=e("C7Lr")(m,p,!1,function(t){e("7hew")},null,null);a.default=u.exports}});