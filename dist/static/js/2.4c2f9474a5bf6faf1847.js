webpackJsonp([2],{"5tvL":function(t,a){},cL3T:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("fZjL"),i=e.n(s),o=e("p0Vp"),r={name:"detail-modal",props:{title:String,detailData:Object},methods:{}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{id:"detailModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[t._v("\n          ×\n        ")]),t._v(" "),e("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[t._v("\n          "+t._s(t.title)+"\n        ")])]),t._v(" "),e("div",{staticClass:"modal-body",staticStyle:{"text-align":"center"}},[e("table",{staticClass:"table table-hover table-bordered table-responsive",attrs:{id:"workTable"}},[t._m(0),t._v(" "),e("tbody",t._l(this.tableConfig.tableData,function(a,s){return e("tr",[e("td",[t._v(t._s(a.staffNum))]),t._v(" "),e("td",[t._v(t._s(a.staffName))]),t._v(" "),e("td",[t._v(t._s(a.department))]),t._v(" "),e("td",[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){}}},[t._v("查看工资详情")])]),t._v(" "),e("td",[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){}}},[t._v("导出文件")])]),t._v(" "),e("td",[t._v("¥ "+t._s(t._f("shrinkMoneyUnit")(a.salary)))])])}),0)])])])])])},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("员工编号")]),t._v(" "),e("th",[t._v("员工姓名")]),t._v(" "),e("th",[t._v("部门")]),t._v(" "),e("th",[t._v("工作详情")]),t._v(" "),e("th",[t._v("记录文件")]),t._v(" "),e("th",[t._v("工资")])])])}]};var l=e("VU/8")(r,c,!1,function(t){e("p9IN")},null,null).exports,n=e("7+uW"),d=e("mvHQ"),p=e.n(d),u={name:"productForm",props:{oldProductForm:Object,isEdit:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data:function(){return{baseUrl:"",valid:!1,productForm:{id:"",productNum:"",productName:"",processPrice:[{id:"",price:"",process:"",productId:""}]},imageDialogVisible:!1}},watch:{oldProductForm:function(t){this.productForm=t}},mounted:function(){var t=this;$("#myModal").on("hidden.bs.modal",function(){t.clear(),t.$emit("clear")})},methods:{detailPriceExpand:function(){for(var t in this.productForm.processPrice)this.productForm.processPrice[t].price=this.Filters.expendMoneyUnit(this.productForm.processPrice[t].price)},submit:function(){var t=this;this.detailPriceExpand(),this.isEdit?this.$http({method:"put",url:this.apiUrls.getUserIdPrefix()+this.apiUrls.updateProduct+this.productForm.id,data:p()(this.productForm),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(){t.$emit("reload"),$.notify({title:"操作成功",message:"数据已更新至后台",icon:"fa fa-check"},{type:"success"})}).catch(function(){$.notify({title:"数据加载失败",message:"请检查网络情况或刷新重试",icon:"fa fa-close"},{type:"danger"})}):(console.log(this.productForm),this.$http({method:"post",url:this.apiUrls.getUserIdPrefix()+this.apiUrls.insertProduct,data:p()(this.productForm),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(){t.$emit("reload"),$.notify({title:"操作成功",message:"数据已更新至后台",icon:"fa fa-check"},{type:"success"})}).catch(function(){$.notify({title:"数据加载失败",message:"请检查网络情况或刷新重试",icon:"fa fa-close"},{type:"danger"})}))},addProcessPrice:function(){this.productForm.processPrice.push({id:"",price:"",process:"",productId:""})},removeProcessPrice:function(t){this.productForm.processPrice.splice(t,1)},clear:function(){this.productForm={id:"",productNum:"",productName:"",processPrice:[{id:"",price:"",process:"",productId:""}]}}}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{id:"myModal",tabindex:"-10000",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content",staticStyle:{"padding-bottom":"0px"}},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"form-horizontal",attrs:{id:"form-data"}},[e("fieldset",[e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-xs-3 col-sm-3 col-md-3 control-label",attrs:{name:"productNum",for:"productNum"}},[t._v("货品型号")]),t._v(" "),e("div",{staticClass:"col-xs-6 col-sm-6 col-md-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.productNum,expression:"productForm.productNum"}],staticClass:"form-control",attrs:{type:"text",placeholder:"货品型号"},domProps:{value:t.productForm.productNum},on:{input:function(a){a.target.composing||t.$set(t.productForm,"productNum",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"col-xs-3 col-sm-3 col-md-3 control-label",attrs:{for:"goodsName"}},[t._v("货品名称")]),t._v(" "),e("div",{staticClass:"col-xs-6 col-sm-6 col-md-6"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.productForm.productName,expression:"productForm.productName"}],staticClass:"form-control",attrs:{name:"productName",type:"text",placeholder:"货品名称"},domProps:{value:t.productForm.productName},on:{input:function(a){a.target.composing||t.$set(t.productForm,"productName",a.target.value)}}})])]),t._v(" "),t.isEdit?t._e():e("div",{staticClass:"form-group",attrs:{id:"add_area"},on:{click:t.addProcessPrice}},[e("label",{staticClass:"control-label col-xs-3 col-sm-3 col-md-3"},[t._v("操作")]),t._v(" "),t._m(1)]),t._v(" "),e("div",{attrs:{id:"process_list"}},[e("div",{staticClass:"process_info"},t._l(t.productForm.processPrice,function(a,s){return e("div",{key:s,staticClass:"form-group"},[e("label",{staticClass:"control-label col-xs-3 col-sm-3 col-md-3"},[t._v("工序"+t._s(s+1))]),t._v(" "),e("div",{staticClass:"col-sm-3 col-md-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.process,expression:"item.process"}],staticClass:"process form-control",attrs:{name:"process",type:"text",list:"process-list",placeholder:"工序"},domProps:{value:a.process},on:{input:function(e){e.target.composing||t.$set(a,"process",e.target.value)}}})]),t._v(" "),e("div",{staticClass:"col-xs-3 col-sm-3 col-md-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.price,expression:"item.price"}],staticClass:"price form-control",attrs:{name:"number",type:"number",list:"process-list",placeholder:"工价"},domProps:{value:a.price},on:{input:function(e){e.target.composing||t.$set(a,"price",e.target.value)}}})]),t._v(" "),s>0&&!t.isEdit?e("a",{staticClass:"remove_process btn btn-warning",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.removeProcessPrice(s)}}},[e("i",{staticClass:"fa fa-lg fa-minus"})]):t._e()])}),0)]),t._v(" "),t._m(2)])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[t._m(3),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{"data-dismiss":"modal",type:"button"},on:{click:t.submit}},[e("i",{staticClass:"fa fa-fw fa-lg fa-check-circle"}),t._v("\n\t              "+t._s(t.isEdit?"修改":"确定")+"\n\t          ")])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header",staticStyle:{border:"none"}},[a("div",{staticClass:"modal-title"},[this._v("添加货物信息")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-xs-9 col-sm-9 col-md-9"},[a("a",{staticClass:"add_process btn btn-info",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"fa fa-lg fa-plus"}),a("span",[this._v("添加新的工序和相应工价")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("datalist",{attrs:{id:"process-list"}},[e("option",[t._v("成型")]),t._v(" "),e("option",[t._v("上釉")]),t._v(" "),e("option",[t._v("贴标")]),t._v(" "),e("option",[t._v("安搭上水")]),t._v(" "),e("option",[t._v("注把")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"btn btn-default icon-btn",attrs:{"data-dismiss":"modal"}},[a("i",{staticClass:"fa fa-fw fa-lg fa-times-circle"}),this._v("\n              \t取消")])}]};var v=e("VU/8")(u,m,!1,function(t){e("5tvL")},null,null).exports;n.default.component("item-action",o.a);var f={components:{"product-form":v,"detail-modal":l},name:"product",props:{barLoad:Boolean},data:function(){return{isEdit:!1,productForm:{id:"",productNum:"",productName:"",processPrice:[{id:"",price:"",process:"",productId:""}]},detailData:"",pageIndex:1,pageSize:10,total:0,sortBy:"",sortType:"",key:"",isLoading:!1,multipleSort:!1,tableConfig:{tableData:[]}}},created:function(){this.getTableData()},watch:{barLoad:function(){var t=this,a=this.tableConfig.tableData;this.isLoading=!0,this.tableConfig.tableData=[],setTimeout(function(){t.tableConfig.tableData=a,t.isLoading=!1},400)},key:function(t){t||this.getTableData()}},methods:{detailPriceShrink:function(t){for(var a in t)for(var e in t[a].processPrice)t[a].processPrice[e].price=this.Filters.shrinkMoneyUnit(t[a].processPrice[e].price);return t},getTableData:function(){var t=this;this.isLoading=!0;var a={page:this.pageIndex,rows:this.pageSize,sortBy:this.sortBy,sortType:this.sortType,key:this.key};this.$api.productList(a).then(function(a){a.datas=t.detailPriceShrink(a.datas),t.tableConfig.tableData=a.datas,t.total=a.total,t.isLoading=!1}).catch(function(a){t.isLoading=!1})},pageChange:function(t){this.pageIndex=t,this.getTableData()},pageSizeChange:function(t){this.pageIndex=1,this.pageSize=t,this.getTableData()},customCompFunc:function(t){"delete"===t.type?this.deleteStaff(t.id):"edit"===t.type&&(this.isEdit=!0,this.productForm=t.rowData,$("#myModal").modal("show"))},clear:function(){this.productForm={id:"",productNum:"",productName:"",processPrice:[{id:"",price:"",process:"",productId:""}]}},sortChange:function(t){var a=this,e=this;i()(t).forEach(function(s){t[s]&&(e.sortBy=s,e.sortType=t[s],a.getTableData())})},addProduct:function(){this.isEdit=!1},deleteStaff:function(t){var a=this;this.$api.deleteProduct(t).then(function(t){a.getTableData(),swal("删除成功!","该条记录已被永久性移除","success")})}}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-body",attrs:{id:"card-body"}},[e("div",{staticClass:"row"},[e("ul",{staticClass:"col-sm-6 bread-li"},[e("li",{attrs:{"data-toggle":"modal","data-target":"#myModal"},on:{click:t.addProduct}},[t._m(1)])]),t._v(" "),e("ul",{staticClass:"col-sm-6 bread-li right-bread"},[e("li",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],staticClass:"form-control",attrs:{type:"text",placeholder:"输入关键字搜索"},domProps:{value:t.key},on:{change:function(t){},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getTableData(a)},input:function(a){a.target.composing||(t.key=a.target.value)}}})]),t._v(" "),e("li",[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.getTableData}},[e("i",{staticClass:"fa fa-fw fa-lg fa-search"}),t._v(" 搜索\n\t\t                  ")])])])]),t._v(" "),e("div",{staticClass:"row"},[e("table",{staticClass:"table table-hover table-bordered table-responsive",attrs:{id:"workTable"}},[t._m(2),t._v(" "),e("tbody",t._l(t.tableConfig.tableData,function(a,s){return e("tr",[e("td",[t._v(t._s(a.productNum))]),t._v(" "),e("td",[t._v(t._s(a.productName))]),t._v(" "),e("td",[e("div",{staticClass:"dropdown"},[t._m(3,!0),t._v(" "),e("ul",{staticClass:"dropdown-menu"},t._l(a.processPrice,function(a,s){return e("li",{key:s},[e("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n\t\t\t\t                                "+t._s(a.process)),e("span",{staticClass:"pull-right"},[t._v("¥ "+t._s(a.price))])])])}),0)])]),t._v(" "),e("td",[t._v(t._s(t._f("timeFormat")(a.created,"Y/MM/D")))]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[e("item-action",{attrs:{rowData:a,index:s},on:{"on-custom-comp":t.customCompFunc}})],1)])}),0)])]),t._v(" "),e("div",{staticClass:"row v-pagin"},[e("v-pagination",{attrs:{total:t.total,"page-size":t.pageSize,layout:["total","prev","pager","next","sizer","jumper"]},on:{"page-change":t.pageChange,"page-size-change":t.pageSizeChange}})],1)])])])])]),t._v(" "),e("product-form",{attrs:{oldProductForm:t.productForm,isEdit:t.isEdit},on:{clear:t.clear,reload:t.getTableData}})],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-title"},[e("div",[e("h1",[e("i",{staticClass:"fa fa-laptop"}),t._v("货物信息")]),t._v(" "),e("p",[t._v("录入或修改我的货物信息")])]),t._v(" "),e("div",[e("ul",{staticClass:"breadcrumb"},[e("li",[e("i",{staticClass:"fa fa-cubes fa-lg"})]),t._v(" "),e("li",[t._v("管理")]),t._v(" "),e("li",[e("a",{attrs:{href:"#/staffs"}},[t._v("货物信息")])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"fa fa-lg fa-plus"}),this._v("添加")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("货物编号")]),t._v(" "),e("th",[t._v("货物品名")]),t._v(" "),e("th",[t._v("详情工序")]),t._v(" "),e("th",[t._v("添加日期")]),t._v(" "),e("th",[t._v("操作")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("a",{staticClass:"dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"javascript:void(0)","aria-expanded":"true"}},[this._v("\n\t\t            \t\t\t        工序详情查看\n\t\t            \t\t\t        "),a("span",{staticClass:"caret"})])}]},h=e("VU/8")(f,_,!1,null,null,null);a.default=h.exports},p9IN:function(t,a){}});
//# sourceMappingURL=2.4c2f9474a5bf6faf1847.js.map